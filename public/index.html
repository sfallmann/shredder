<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Shredder | A metal version of SIMON</title>
  <link href="https://fonts.googleapis.com/css?family=New+Rocker|Play" rel="stylesheet">  
  <link href="assets/libs/skeleton/skeleton.css" rel="stylesheet"/>
  <style>
    body {
      color: white;
      /* https://uigradients.com/#ShadowNight */
      background: #000000;  /* fallback for old browsers */
      background: -webkit-linear-gradient(to right, #53346D, #000000);  /* Chrome 10-25, Safari 5.1-6 */
      background: linear-gradient(to right, #53346D, #000000); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */

    }
    body * {
     /* border: 1px solid white; */
      overflow: hidden;
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;    
      user-select: none; 
    }

    .hide {
      display: none;
    }

    .center-text {
      text-align: center;
    }

    .blue {
      background-color: #0000FF;
    }

    .lightblue {
      background-color: #ADD8E6;
    }

    .red {
      background-color: #FF0000;
    }
    
    .lightred {
      background-color: #FFA07A;
    }

    .green {
      background-color: #008000;
    }

    .lightgreen {
      background-color: #90EE90;
    }

    .yellow {
      background-color: #FFFF00;
    }        

    .lightyellow {
      background-color: #FFFFE0;
    }      

    .nocolor {
      opacity: .5;
    }

    .color {
      height: 200px;
      width: 100%;
    }

    .color:hover {
      cursor: pointer;
    }

    .clickable {
      border: 4px solid lightgrey;
    }
    #audio-control {
      width: 40px;
      height: 40px;
      position: absolute;
      right: 10px;
      top: 10px;
      z-index: 100;
    }

    #audio-control:hover {
      cursor: pointer;
    }

    #game-title {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    #shredder-logo { 
      width: 100%;
      margin: auto;
      fill: #d12d2b;
      fill-opacity: 0;
      stroke:#ffffff;      
      stroke-width: 1;
      stroke-miterlimit: 4;
      stroke-dasharray: 1000;
      stroke-opacity: 0;
      position: relative;
      padding-top: 75px;
    }

    .simon {
      font-family: 'Play', sans-serif;
      font-weight: bold;
    }

    .metal {
      font-family: 'New Rocker', cursive;
    }

    #play-game-pick svg{
      width: 125px;
    }

    #pick {
      fill: #d12d2b;
    }

    #play-game-pick svg:hover {
      cursor: pointer;
    }

    #by-line {
      color: white;
      opacity: 0;
    }

    #game-main {
      display: none;
      opacity: 0;
    }

    #messages {
      height: 100px;
      text-align: center;
    }

  </style>
</head>
<body>
  <header>
    <img id="audio-control" src="assets/img/audio-on.svg" alt="Audio On"/>
  </header>
  <section id="game-title" class="container">
    <div class="row">
      <div id="logo" class="twelve columns">
      </div>
      <div id="by-line" class="twelve columns center-text">
        <h4>A <span class="metal">METAL</span> version of</h4>
        <h4 class="simon">SIMON</h4>
        <h4>by Sean Fallmann</h4>
        <div id="play-game-pick">
          <svg width="200" height="200" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 200 200">
          <g>
            <title>Start Game</title>
            <g id="pick" stroke="white" fill="#ffffff" transform="translate(0,200) scale(0.10000000149011612,-0.10000000149011612) ">
            <path id="pick-shape" d="m765,1899c-244,-36 -442,-139 -528,-276c-15,-23 -36,-70 -48,-105c-59,-175 26,-533 211,-885c91,-174 165,-279 275,-388c135,-135 201,-170 325,-170c78,0 92,3 156,35c95,48 238,190 330,330c130,196 241,442 306,675c29,107 33,134 33,251l0,130l-37,75c-43,84 -62,108 -139,170c-94,76 -247,133 -424,159c-84,12 -376,11 -460,-1zm382,-69c349,-31 557,-167 603,-393c38,-186 -116,-635 -327,-955c-73,-110 -230,-270 -298,-303c-71,-34 -180,-34 -250,0c-68,33 -226,194 -299,304c-209,318 -362,763 -327,950c33,180 182,312 416,368c149,35 309,45 482,29z"/>
            </g>
            <text font-weight="bold" xml:space="preserve" text-anchor="start" font-family="Helvetica, Arial, sans-serif" font-size="24" id="pick-text" y="80.5" x="38.63281" stroke-width="0" stroke="#000" fill="#ffffff">Play Game</text>
          </g>
          </svg>      
        </div>
      </div>
    </div>
    <div class="row">
      <div class="one column"></div>
      <div class="ten columns">
      </div>
      <div class="one column"></div>
    </div>
  </section>
  <section id="game-main" class="container">
    <div class="row">
      <div class="two columns">Count: <div id="count">--</div></div>
      <div id="messages" class="ten columns"></div>
    </div>
    <div class="row">
      <div id="blue-btn" data-color="blue" class="three columns blue color"></div>  
      <div id="red-btn" data-color="red" class="three columns red color"></div>
      <div id="green-btn" data-color="green" class="three columns green color"></div>
      <div id="yellow-btn" data-color="yellow" class="three columns yellow color"></div>                        
    </div>
    <div class="row">
      <div class="four columns">
        <label>On <input type="checkbox" name="on"></label>
      </div>
      <div class="four columns">
        <label>Strict <input type="checkbox" name="strict"></label>
      </div>
      <div class="four columns">
        <input type="button" id="start" value="Start!">
      </div>            
    </div>
  </section>
  <script src="assets/libs/howler.js/howler.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.1/TweenMax.min.js"></script>
  <script src="assets/libs/jquery/jquery.js"></script>
  <script src="assets/js/simon.js"></script>  
  <script src="assets/js/app.js"></script>
  <script>

    var thudSound = new Howl({src: ['assets/audio/thud.mp3'], preload: true});
    var vaiShred = new Howl({src: ['assets/audio/vai-style-shred-2.mp3'], preload: true, loop: true});    

    var soundRegistry = {
      sounds: [],
      mute: function mute(value) {
        Howler.mute(value);
      },
      muteStatus: false
    };

    soundRegistry.sounds.push(thudSound);
    soundRegistry.sounds.push(vaiShred);

    $('#audio-control').on("click", function() {
      soundRegistry.muteStatus = !soundRegistry.muteStatus;

      if (soundRegistry.muteStatus){
        $(this).attr('src','assets/img/audio-off.svg');
      } else {
        $(this).attr('src','assets/img/audio-on.svg');
      }

      soundRegistry.mute(soundRegistry.muteStatus);
      
    });


    var gameScreens = {
      title: {
        load: function load(){



          $.get('assets/img/shredder-logo-2.svg', function(doc) {
            $('#logo').html($(doc.querySelector('svg')));
            var $logo = $('#logo-text');  
            var $logoPaths = $('#logo-text path');
            var $shred = $logoPaths.slice(0,5);
            var $der = $logoPaths.slice(5);
            var $playGame = $('#play-game-pick svg');
            var pickAnimation = TweenMax.to($playGame, 3, {rotationY:360, ease:Linear.easeNone, repeat:-1});

            $playGame.on('click', function() {
              pickAnimation.pause();
              logoAnimation.pause();
              vaiShred.stop();
              TweenMax.to('#game-title', 2, {opacity: 0, display: 'none'});
              TweenMax.to('#game-main', 2, {opacity: 1, display: 'block', delay:2.5});
            })

            var logoAnimation = {
              timeline: new TimelineMax(),
              init: function init() {
                this.timeline.add(TweenMax.to($shred, 0, {"stroke-opacity": 1, "fill-opacity": 1}));
                this.timeline.add(TweenMax.from($shred, .3, {y:-60}));
                this.timeline.add(TweenMax.to($shred, .05, {y:-2}));
                this.timeline.add(TweenMax.to($shred, .05, {y:0}));
                this.timeline.add(TweenMax.to($shred, .05, {y:-1}));
                this.timeline.add(TweenMax.to($shred, .05, {y:0}));     
                this.timeline.add(TweenMax.to($der, .1, {"stroke-opacity": 1, "fill-opacity": 1})); 
                this.timeline.add(TweenMax.from($der, .5, {y:-200,scale:6}));
                this.timeline.add(TweenMax.to($('#by-line'), 1, {opacity: 1, delay: 1}));   
                this.timeline.add(TweenMax.to($logoPaths, .6, {scale:1.035, repeat:-1, yoyo: true, delay: -.75}));
                this.timeline.pause();          
              },
              play: function play() {
                this.timeline.play();
              },
              pause: function pause() {
                this.timeline.pause();
              },              
              restart: function restart() {
                this.timeline.restart();
              }
            }
            logoAnimation.init();
            logoAnimation.play();
            vaiShred.seek(2).play();
            vaiShred.on('end', function() {
              thudSound.play();
              vaiShred.seek(2);
              logoAnimation.restart();
            });      
            thudSound.play();
          });
        }
      }
    };
    
    gameScreens.title.load();


  </script>
</body>
</html>